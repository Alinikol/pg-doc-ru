# Alexander Lakhin <a.lakhin@postgrespro.ru>, 2012, 2013, 2015, 2016.
# Pavel Luzanov <p.luzanov@postgrespro.ru>, 2015, 2016.
msgid ""
msgstr ""
"Project-Id-Version: \n"
"POT-Creation-Date: 2016-06-08 13:30+0300\n"
"PO-Revision-Date: 2016-04-13 09:36+0300\n"
"Language-Team: Russian <pgsql-docs@lists.postgrespro.ru>\n"
"Language: ru\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n"
"%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2);\n"
"X-Generator: Lokalize 2.0\n"

#: generic-wal.xml:5(title)
msgid "Generic WAL Records"
msgstr ""

#: generic-wal.xml:7(para)
msgid ""
"Although all built-in WAL-logged modules have their own types of WAL "
"records, there is also a generic WAL record type, which describes changes to "
"pages in a generic way. This is useful for extensions that provide custom "
"access methods, because they cannot register their own WAL redo routines."
msgstr ""

#: generic-wal.xml:15(para)
msgid ""
"The API for constructing generic WAL records is defined in <filename>access/"
"generic_xlog.h</filename> and implemented in <filename>access/transam/"
"generic_xlog.c</filename>."
msgstr ""

#: generic-wal.xml:27(para)
msgid ""
"<function>state = GenericXLogStart(relation)</function> &mdash; start "
"construction of a generic WAL record for the given relation."
msgstr ""

#: generic-wal.xml:34(para)
msgid ""
"<function>page = GenericXLogRegisterBuffer(state, buffer, flags)</function>\n"
"      &mdash; register a buffer to be modified within the current generic "
"WAL record. This function returns a pointer to a temporary copy of the "
"buffer's page, where modifications should be made. (Do not modify the "
"buffer's contents directly.) The third argument is a bitmask of flags "
"applicable to the operation. Currently the only such flag is "
"<literal>GENERIC_XLOG_FULL_IMAGE</literal>, which indicates that a full-page "
"image rather than a delta update should be included in the WAL record. "
"Typically this flag would be set if the page is new or has been rewritten "
"completely. <function>GenericXLogRegisterBuffer</function> can be repeated "
"if the WAL-logged action needs to modify multiple pages."
msgstr ""

#: generic-wal.xml:51(para)
msgid "Apply modifications to the page images obtained in the previous step."
msgstr ""

#: generic-wal.xml:57(para)
msgid ""
"<function>GenericXLogFinish(state)</function> &mdash; apply the changes to "
"the buffers and emit the generic WAL record."
msgstr ""

#: generic-wal.xml:21(para)
msgid ""
"To perform a WAL-logged data update using the generic WAL record facility, "
"follow these steps: <placeholder-1/>"
msgstr ""

#: generic-wal.xml:65(para)
msgid ""
"WAL record construction can be canceled between any of the above steps by "
"calling <function>GenericXLogAbort(state)</function>. This will discard all "
"changes to the page image copies."
msgstr ""

#: generic-wal.xml:77(para)
msgid ""
"No direct modifications of buffers are allowed! All modifications must be "
"done in copies acquired from <function>GenericXLogRegisterBuffer()</"
"function>. In other words, code that makes generic WAL records should never "
"call <function>BufferGetPage()</function> for itself. However, it remains "
"the caller's responsibility to pin/unpin and lock/unlock the buffers at "
"appropriate times. Exclusive lock must be held on each target buffer from "
"before <function>GenericXLogRegisterBuffer()</function> until after "
"<function>GenericXLogFinish()</function>."
msgstr ""

#: generic-wal.xml:90(para)
msgid ""
"Registrations of buffers (step 2) and modifications of page images (step 3) "
"can be mixed freely, i.e., both steps may be repeated in any sequence. Keep "
"in mind that buffers should be registered in the same order in which locks "
"are to be obtained on them during replay."
msgstr ""

#: generic-wal.xml:99(para)
msgid ""
"The maximum number of buffers that can be registered for a generic WAL "
"record is <literal>MAX_GENERIC_XLOG_PAGES</literal>. An error will be thrown "
"if this limit is exceeded."
msgstr ""

#: generic-wal.xml:107(para)
msgid ""
"Generic WAL assumes that the pages to be modified have standard layout, and "
"in particular that there is no useful data between <structfield>pd_lower</"
"structfield> and <structfield>pd_upper</structfield>."
msgstr ""

#: generic-wal.xml:115(para)
msgid ""
"Since you are modifying copies of buffer pages, "
"<function>GenericXLogStart()</function> does not start a critical section. "
"Thus, you can safely do memory allocation, error throwing, etc. between "
"<function>GenericXLogStart()</function> and <function>GenericXLogFinish()</"
"function>. The only actual critical section is present inside "
"<function>GenericXLogFinish()</function>. There is no need to worry about "
"calling <function>GenericXLogAbort()</function> during an error exit, either."
msgstr ""

#: generic-wal.xml:128(para)
msgid ""
"<function>GenericXLogFinish()</function> takes care of marking buffers dirty "
"and setting their LSNs. You do not need to do this explicitly."
msgstr ""

#: generic-wal.xml:135(para)
msgid ""
"For unlogged relations, everything works the same except that no actual WAL "
"record is emitted. Thus, you typically do not need to do any explicit checks "
"for unlogged relations."
msgstr ""

#: generic-wal.xml:143(para)
msgid ""
"The generic WAL redo function will acquire exclusive locks to buffers in the "
"same order as they were registered. After redoing all changes, the locks "
"will be released in the same order."
msgstr ""

#: generic-wal.xml:151(para)
msgid ""
"If <literal>GENERIC_XLOG_FULL_IMAGE</literal> is not specified for a "
"registered buffer, the generic WAL record contains a delta between the old "
"and the new page images. This delta is based on byte-by-byte comparison. "
"This is not very compact for the case of moving data within a page, and "
"might be improved in the future."
msgstr ""

#: generic-wal.xml:71(para)
#, fuzzy
msgid ""
"Please note the following points when using the generic WAL record facility: "
"<placeholder-1/>"
msgstr ""
"Для выбора действия необходимо указать минимум один из этих параметров: "
"<placeholder-1/>"

#. Put one translator per line, in the form of NAME <EMAIL>, YEAR1, YEAR2
#: generic-wal.xml:0(None)
msgid "translator-credits"
msgstr "translator-credits"
